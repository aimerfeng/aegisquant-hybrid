<Window x:Class="AegisQuant.UI.Views.NotificationSettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="通知设置" Height="550" Width="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">
    
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 通知渠道配置 -->
        <GroupBox Grid.Row="0" Header="通知渠道" Margin="0,0,0,16">
            <StackPanel Margin="8">
                <CheckBox x:Name="DingTalkEnabled" Content="钉钉通知" Margin="0,0,0,8"/>
                <Grid Margin="20,0,0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Webhook:" VerticalAlignment="Center"/>
                    <TextBox Grid.Column="1" x:Name="DingTalkWebhook" 
                             IsEnabled="{Binding ElementName=DingTalkEnabled, Path=IsChecked}"/>
                </Grid>
                
                <CheckBox x:Name="FeishuEnabled" Content="飞书通知" Margin="0,8,0,8"/>
                <Grid Margin="20,0,0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Webhook:" VerticalAlignment="Center"/>
                    <TextBox Grid.Column="1" x:Name="FeishuWebhook" 
                             IsEnabled="{Binding ElementName=FeishuEnabled, Path=IsChecked}"/>
                </Grid>
            </StackPanel>
        </GroupBox>
        
        <!-- 静默时段配置 -->
        <GroupBox Grid.Row="1" Header="静默时段" Margin="0,0,0,16">
            <StackPanel Margin="8">
                <CheckBox x:Name="SilentModeEnabled" Content="启用静默时段 (紧急通知除外)" Margin="0,0,0,8"/>
                <Grid Margin="20,0,0,0" IsEnabled="{Binding ElementName=SilentModeEnabled, Path=IsChecked}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="80"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="开始时间:" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <ComboBox Grid.Column="1" x:Name="SilentStartHour" Width="70">
                        <ComboBoxItem Content="20:00"/>
                        <ComboBoxItem Content="21:00"/>
                        <ComboBoxItem Content="22:00" IsSelected="True"/>
                        <ComboBoxItem Content="23:00"/>
                    </ComboBox>
                    <TextBlock Grid.Column="2" Text="结束时间:" VerticalAlignment="Center" Margin="16,0,8,0"/>
                    <ComboBox Grid.Column="3" x:Name="SilentEndHour" Width="70">
                        <ComboBoxItem Content="06:00"/>
                        <ComboBoxItem Content="07:00"/>
                        <ComboBoxItem Content="08:00" IsSelected="True"/>
                        <ComboBoxItem Content="09:00"/>
                    </ComboBox>
                </Grid>
            </StackPanel>
        </GroupBox>
        
        <!-- 通知类型开关 -->
        <GroupBox Grid.Row="2" Header="通知类型" Margin="0,0,0,16">
            <StackPanel Margin="8">
                <CheckBox x:Name="RiskNotifyEnabled" Content="风控熔断通知" IsChecked="True" Margin="0,0,0,4"/>
                <CheckBox x:Name="OrderNotifyEnabled" Content="订单成交通知" IsChecked="True" Margin="0,0,0,4"/>
                <CheckBox x:Name="DrawdownNotifyEnabled" Content="回撤预警通知" IsChecked="True" Margin="0,0,0,4"/>
                <CheckBox x:Name="EmergencyNotifyEnabled" Content="紧急停止通知" IsChecked="True" IsEnabled="False"/>
            </StackPanel>
        </GroupBox>
        
        <!-- 通知历史 -->
        <GroupBox Grid.Row="3" Header="通知历史">
            <DataGrid x:Name="HistoryDataGrid" 
                      AutoGenerateColumns="False" 
                      IsReadOnly="True"
                      CanUserAddRows="False"
                      BorderThickness="0"
                      MaxHeight="150">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="时间" Binding="{Binding FormattedTime}" Width="130"/>
                    <DataGridTextColumn Header="类型" Binding="{Binding TypeDisplay}" Width="80"/>
                    <DataGridTextColumn Header="标题" Binding="{Binding Title}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>
        </GroupBox>
        
        <!-- 按钮 -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
            <Button Content="测试通知" Click="TestButton_Click" Padding="16,6" Margin="0,0,8,0"/>
            <Button Content="保存" Click="SaveButton_Click" Padding="16,6" Margin="0,0,8,0"/>
            <Button Content="取消" Click="CancelButton_Click" Padding="16,6"/>
        </StackPanel>
    </Grid>
</Window>
